<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Simple words arranged, One door opens to a room,The vellum holds its breath."
    />
    <meta name="author" content="Prabhakar Chaganti" />
    <meta name="keywords" content="Vellum, Blog" />
    <meta property="og:title" content="Vellum" />
    <meta
      property="og:description"
      content="Simple words arranged, One door opens to a room,The vellum holds its breath."
    />
    <title>Vellum</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400&family=Montserrat:wght@700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
      /* CSS has been updated for better focus mode */
      body {
        font-family: "Merriweather", serif;
        line-height: 1.7;
        background-color: #f8f9fa; /* Page background */
        color: #333;
        margin: 0;
        padding: 0;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      .container {
        max-width: 720px;
        margin: 0 auto;
        padding: 40px 20px;
      }
      .page-header {
        text-align: center;
        margin-bottom: 60px;
      }
      .page-header h1 {
        font-family: "Montserrat", sans-serif;
        font-size: 2.5rem;
        color: #1a1a1a;
        margin: 0;
      }

      .containerh {
        padding: 5px 20px; /* Adjusted padding for mobile */
        background-color: var(--container-bg);
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        position: sticky;      /* Make header sticky */
        top: 0;                /* Stick to top */
        z-index: 100;          /* Ensure it's above other content */
        background: #fff;      /* Ensure background covers content below */
      }

      h1 {
        text-align: left; /* ADD this */
        color: var(--text-color);
        font-weight: 500; /* Slightly bolder main title */
        font-size: 1.7em;
        line-height: 1.3; /* Adjust line height if needed */
        margin: 0.5em 0;
        word-break: break-word; /* Prevent text overflow */
      }

      /* Styles for the new spans */
      .h1-separator {
        font-weight: 300; /* Lighter weight for the pipe */
        color: #555; /* Use a less prominent color */
        margin: 0 0.2em; /* Add a little space around the pipe */
      }

      .h1-subtitle {
        font-weight: 300; /* Lighter weight for the subtitle */
        color: #555; /* Match separator or use main text color */
        /* color: var(--text-color); */ /* Alternative: Keep main color but lighter weight */
      }

      .h1-link {
        color: inherit; /* Make the link inherit the H1's text color */
        text-decoration: none; /* Remove the default underline */
        transition: color 0.2s ease; /* Add smooth transition for hover */
        padding: 8px 12px; /* Larger touch target */
        margin: -8px -12px; /* Offset padding to maintain layout */
        display: inline-block;
        min-height: 44px; /* Minimum touch target size */
        line-height: 44px;
      }

      .h1-link:hover {
        color: #0077cc; /* Change color on hover (optional, use var(--text-color) to keep it same) */
        /* text-decoration: underline; */ /* Optionally add underline on hover */
      }

      /* UPDATED: Inactive posts now have a transparent background */
      .blog-post {
        background-color: transparent;
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 25px;
        margin-bottom: 20px;
        transition: background-color 0.3s ease, box-shadow 0.3s ease,
          border-color 0.3s ease;
      }

      /* UPDATED: Expanded post becomes white and lifts off the page */
      .blog-post.expanded {
        background-color: #ffffff;
        border-color: burlywood;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
      }

      .post-header {
        cursor: pointer;
        position: relative;
        scroll-margin-top: 70px; /* Adjust this value to match .containerh height */
      }

      .post-title {
        font-family: "Montserrat", sans-serif;
        font-size: 1.8rem;
        margin: 0;
        color: #222;
        display: flex;
        align-items: center;
        margin-bottom: 5px;
      }

      .expander-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin-right: 12px;
        flex-shrink: 0;
        transition: transform 0.3s ease-out;
        color: #888;
      }
      .expander-icon svg {
        width: 24px;
        height: 24px;
      }
      .blog-post.expanded .expander-icon {
        transform: rotate(90deg);
        color: #333;
      }

      .post-body {
        margin-left: 36px;
      }
      .post-date {
        font-size: 0.85rem;
        color: #888;
        display: block;
        font-family: sans-serif;
        font-style: normal;
        font-weight: 300;
      }
      .post-excerpt p {
        font-weight: 300;
        font-style: italic;
        color: #555;
        margin-top: 10px;
      }
      .post-full-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.7s ease-in-out, margin-top 0.5s ease;
        font-weight: 400;
        margin-left: 36px;
      }
      .blog-post.expanded .post-full-content {
        margin-top: 25px;
        max-height: 5000px;
      }
      .post-full-content p {
        margin-bottom: 1.5em;
      }
      .post-full-content blockquote {
        border-left: 2px solid #ccc;
        margin-left: 0;
        padding-left: 20px;
        font-style: italic;
        color: #666;
      }
      #loading-state {
        text-align: center;
        color: #777;
        font-style: italic;
      }
    </style>
  </head>
  <body>
    <div class="containerh">
      <h1 style="font-family: Raleway">
        <a
          href="https://prabhakar.chaganti.net"
          target="_blank"
          rel="noopener noreferrer"
          class="h1-link"
          >pchaganti</a
        >
        <span class="h1-separator">|</span>
        <span class="h1-subtitle" id="vellum-refresh">vellum</span>
      </h1>
    </div>
    <div class="container">
      <main id="blog-posts-container">
        <p id="loading-state">Loading posts...</p>
      </main>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const postFiles = [{"filename": "Marcus_Aurelius_20250719T112649.md", "timestamp": "July 19, 2025", "iso_timestamp": "20250719T112649"}, {"filename": "Aristotle_20250718T112832.md", "timestamp": "July 18, 2025", "iso_timestamp": "20250718T112832"}, {"filename": "Akhenaten_20250717T112942.md", "timestamp": "July 17, 2025", "iso_timestamp": "20250717T112942"}, {"filename": "Count_Belisarius_20250716T112929.md", "timestamp": "July 16, 2025", "iso_timestamp": "20250716T112929"}, {"filename": "Les_Miserables_20250715T112913.md", "timestamp": "July 15, 2025", "iso_timestamp": "20250715T112913"}, {"filename": "Niccolo_Paganini_20250714T112917.md", "timestamp": "July 14, 2025", "iso_timestamp": "20250714T112917"}, {"filename": "The_horses_of_St__Marks_20250713T112711.md", "timestamp": "July 13, 2025", "iso_timestamp": "20250713T112711"}, {"filename": "Hephaestus_20250712T112636.md", "timestamp": "July 12, 2025", "iso_timestamp": "20250712T112636"}, {"filename": "Johann_Sebastian_Bach_20250711T112815.md", "timestamp": "July 11, 2025", "iso_timestamp": "20250711T112815"}, {"filename": "Goya_20250710T112816.md", "timestamp": "July 10, 2025", "iso_timestamp": "20250710T112816"}, {"filename": "Diogenes_the_cynic_20250709T112849.md", "timestamp": "July 09, 2025", "iso_timestamp": "20250709T112849"}, {"filename": "Sprezzatura_20250708T112756.md", "timestamp": "July 08, 2025", "iso_timestamp": "20250708T112756"}, {"filename": "Umberto_Eco_20250707T112735.md", "timestamp": "July 07, 2025", "iso_timestamp": "20250707T112735"}, {"filename": "Borges_20250706T112616.md", "timestamp": "July 06, 2025", "iso_timestamp": "20250706T112616"}, {"filename": "Charon_20250705T112457.md", "timestamp": "July 05, 2025", "iso_timestamp": "20250705T112457"}, {"filename": "Sophocles_20250704T112724.md", "timestamp": "July 04, 2025", "iso_timestamp": "20250704T112724"}, {"filename": "Guernica_20250703T112740.md", "timestamp": "July 03, 2025", "iso_timestamp": "20250703T112740"}, {"filename": "Divine_Comedy_20250702T112724.md", "timestamp": "July 02, 2025", "iso_timestamp": "20250702T112724"}, {"filename": "Achilles_20250701T112746.md", "timestamp": "July 01, 2025", "iso_timestamp": "20250701T112746"}, {"filename": "Siddhartha_20250630T112721.md", "timestamp": "June 30, 2025", "iso_timestamp": "20250630T112721"}, {"filename": "Hermes_the_god_20250629T112514.md", "timestamp": "June 29, 2025", "iso_timestamp": "20250629T112514"}, {"filename": "Hagia_Sofia_20250628T112531.md", "timestamp": "June 28, 2025", "iso_timestamp": "20250628T112531"}, {"filename": "Labors_of_Hercules_20250627T112713.md", "timestamp": "June 27, 2025", "iso_timestamp": "20250627T112713"}, {"filename": "Haiku_20250626T112742.md", "timestamp": "June 26, 2025", "iso_timestamp": "20250626T112742"}, {"filename": "Epictetus_20250625T112810.md", "timestamp": "June 25, 2025", "iso_timestamp": "20250625T112810"}, {"filename": "Opera_20250624T112747.md", "timestamp": "June 24, 2025", "iso_timestamp": "20250624T112747"}, {"filename": "Hades_20250623T145400.md", "timestamp": "June 23, 2025", "iso_timestamp": "20250623T145400"}, {"filename": "Cicero_20250623T112746.md", "timestamp": "June 23, 2025", "iso_timestamp": "20250623T112746"}, {"filename": "Bibliophile_20250621T112735.md", "timestamp": "June 21, 2025", "iso_timestamp": "20250621T112735"}, {"filename": "Parthenon_20250620T112707.md", "timestamp": "June 20, 2025", "iso_timestamp": "20250620T112707"}, {"filename": "Napoleon_20250619T112726.md", "timestamp": "June 19, 2025", "iso_timestamp": "20250619T112726"}, {"filename": "Agrippina_20250618T112720.md", "timestamp": "June 18, 2025", "iso_timestamp": "20250618T112720"}, {"filename": "Bastille_day_20250617T181906.md", "timestamp": "June 17, 2025", "iso_timestamp": "20250617T181906"}, {"filename": "Neural_Networks_20250617T112704.md", "timestamp": "June 17, 2025", "iso_timestamp": "20250617T112704"}, {"filename": "French_Revolution_20250616T195728.md", "timestamp": "June 16, 2025", "iso_timestamp": "20250616T195728"}, {"filename": "Edgar_Allan_Poe_20250616T195155.md", "timestamp": "June 16, 2025", "iso_timestamp": "20250616T195155"}, {"filename": "Black_Holes_20250616T122040.md", "timestamp": "June 16, 2025", "iso_timestamp": "20250616T122040"}, {"filename": "Lighthouses_20250614T141948.md", "timestamp": "June 14, 2025", "iso_timestamp": "20250614T141948"}, {"filename": "Calligraphy_20250613T112708.md", "timestamp": "June 13, 2025", "iso_timestamp": "20250613T112708"}, {"filename": "Styx_20250610T112700.md", "timestamp": "June 10, 2025", "iso_timestamp": "20250610T112700"}, {"filename": "Sherlock_Holmes_20250608T154210.md", "timestamp": "June 08, 2025", "iso_timestamp": "20250608T154210"}, {"filename": "Pacific_Ocean_20250608T152550.md", "timestamp": "June 08, 2025", "iso_timestamp": "20250608T152550"}, {"filename": "Acropolis_20250608T142217.md", "timestamp": "June 08, 2025", "iso_timestamp": "20250608T142217"}, {"filename": "Akhenaten_20250606T154210.md", "timestamp": "June 06, 2025", "iso_timestamp": "20250606T154210"}, {"filename": "bradman_20250605T134210.md", "timestamp": "June 05, 2025", "iso_timestamp": "20250605T134210"}];
        const container = document.getElementById("blog-posts-container");
        const loadingIndicator = document.getElementById("loading-state");

        const fetchPost = async (postObject) => {
          try {
            const response = await fetch(`posts/${postObject.filename}`);
            if (!response.ok) return null; // Skip if file not found or fetch fails
            const markdown = await response.text();

            const fullHtmlContent = marked.parse(markdown);
            const tempDiv = document.createElement("div");
            tempDiv.innerHTML = fullHtmlContent;

            const titleElement = tempDiv.querySelector("h1, h2");
            const firstParagraphElement = tempDiv.querySelector("p");
            let titleText = titleElement?.textContent || "Untitled Post";
            if (titleText.includes(":")) {
              titleText = titleText.split(":")[1].trim();
            }
            const firstParagraphHtml =
              firstParagraphElement?.innerHTML || "No content available.";

            // Skip post if first paragraph is the prompt message
            if (
              firstParagraphHtml.startsWith(
                "Okay, please provide the word or words you'd like me to use for the post."
              )
            ) {
              return null;
            }

            if (titleElement) titleElement.remove();
            if (firstParagraphElement) firstParagraphElement.remove();

            const remainingContent = tempDiv.innerHTML.trim();

            // --- Add unique id to each post for deep linking ---
            const postId = postObject.filename.replace('.md', '');
            const postElement = document.createElement("article");
            postElement.className = "blog-post";
            postElement.id = `post-${postId}`;

            postElement.innerHTML = `
              <div class="post-header">
                  <h2 class="post-title">
                      <span class="expander-icon">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                              <polyline points="9 18 15 12 9 6"></polyline>
                          </svg>
                      </span>
                      <span>${titleText}</span>
                  </h2>
                  <div class="post-body">
                      <time class="post-date">${postObject.timestamp}</time>
                      <div class="post-excerpt">
                          <p>${firstParagraphHtml}</p>
                      </div>
                  </div>
              </div>
              <div class="post-full-content">
                  ${remainingContent}
              </div>
          `;
            return postElement;
          } catch (error) {
            // Skip this post if any error occurs (e.g., file missing)
            return null;
          }
        };

        const loadAllPosts = async () => {
          if (postFiles.length === 0) {
            loadingIndicator.textContent =
              "No posts found. Try running 'python build.py'.";
            return;
          }
          try {
            const postElements = await Promise.all(postFiles.map(fetchPost));
            loadingIndicator.remove();
            postElements
              .filter(Boolean) // Filter out nulls (skipped posts)
              .forEach((element) => container.appendChild(element));
          } catch (error) {
            loadingIndicator.textContent = `Error: ${error.message}`;
          }
        };

        // --- Expand post from hash on load ---
        const expandPostFromHash = () => {
          const hash = window.location.hash;
          if (hash) {
            const post = document.querySelector(hash);
            if (post) {
              post.classList.add("expanded");
              // Scroll to the post-header (title), not the whole post
              const header = post.querySelector('.post-header');
              if (header) {
                header.scrollIntoView({ behavior: "smooth", block: "start" });
              } else {
                post.scrollIntoView({ behavior: "smooth", block: "start" });
              }
            }
          }
        };

        // --- Update URL hash when expanding a post ---
        container.addEventListener("click", (event) => {
          const postHeader = event.target.closest(".post-header");
          if (postHeader) {
            const blogPost = postHeader.closest(".blog-post");
            blogPost.classList.toggle("expanded");
            if (blogPost.classList.contains("expanded")) {
              history.replaceState(null, "", `#${blogPost.id}`);
            }
          }
        });

        loadAllPosts().then(expandPostFromHash);

        document.getElementById('vellum-refresh').style.cursor = 'pointer';
        document.getElementById('vellum-refresh').addEventListener('click', () => {
          window.location.href = window.location.pathname;
        });
      });
    </script>
  </body>
</html>
